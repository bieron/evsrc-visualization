"use strict";function parseRow(a){return{fileA:a.FileA,fileB:a.FileB,corr:parseFloat(a.pcorValues)}}function computeNetwork(a,b){var c={nodes:[],links:[]},d=_.map(a,parseRow),e=_.pluck(d,"fileA"),f=_.pluck(d,"fileB"),g=_.union(e,f),h={};return _.each(g,function(a,b){c.nodes.push({name:a,index:b}),h[a]=b}),_.each(d,function(a){var d=h[a.fileA],e=h[a.fileB];a.corr>b&&c.links.push({source:d,target:e})}),c}var tip=d3.tip().attr("class","d3-tip").offset([-20,0]).html(function(a){return a.name});d3.tsv("data/partialCorrelations_0.1.sif",function(a,b){if(a)throw a;var c=computeNetwork(b,0),d=d3.select("#visualization-container"),e=d.selectAll("svg").data([c]),f=Math.min(parseInt(d.style("width"),10),750),g=f,h=d3.layout.force().nodes(c.nodes).links(c.links).gravity(.15).size([f,g]).start();e.enter().append("svg").classed("network-chart",!0).call(tip),e.attr("width",f).attr("height",g);var i=e.selectAll(".link").data(c.links);i.enter().append("line").classed("link",!0);var j=e.selectAll(".node").data(c.nodes);j.enter().append("circle").classed("node",!0).attr("r",5).call(h.drag),j.on("mouseover",function(a){d3.select(this).transition().attr("r",8),tip.show(a)}).on("mouseout",function(a){d3.select(this).transition().attr("r",5),tip.hide(a)}),h.on("tick",function(){i.attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y}),j.attr("cx",function(a){return a.x}).attr("cy",function(a){return a.y})}),j.exit().remove(),i.exit().remove(),e.exit().remove()});